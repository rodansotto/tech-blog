<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Android Development: main() Method, Application Lifecycle, and Event Handling | Rodan Sotto’s Tech Blog</title>
<meta name="generator" content="Jekyll v3.9.2">
<meta property="og:title" content="Android Development: main() Method, Application Lifecycle, and Event Handling">
<meta property="og:locale" content="en_US">
<meta name="description" content="So, I was going through some tutorials in Android development and along the way created my first applications that just demonstrate the programming features that are available in Android.  It does not seem to me a far fetch programming paradigm as this is mostly familiar to someone with a windows or web development background, but with some subtle differences of course.  My purpose for this post and future posts as well is to list these nuances.">
<meta property="og:description" content="So, I was going through some tutorials in Android development and along the way created my first applications that just demonstrate the programming features that are available in Android.  It does not seem to me a far fetch programming paradigm as this is mostly familiar to someone with a windows or web development background, but with some subtle differences of course.  My purpose for this post and future posts as well is to list these nuances.">
<link rel="canonical" href="https://rodansotto.github.io/tech-blog/2014/03/18/android-development-main-method-application-lifecycle-and-event-handling.html">
<meta property="og:url" content="https://rodansotto.github.io/tech-blog/2014/03/18/android-development-main-method-application-lifecycle-and-event-handling.html">
<meta property="og:site_name" content="Rodan Sotto’s Tech Blog">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-03-18T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Android Development: main() Method, Application Lifecycle, and Event Handling">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2014-03-18T00:00:00+00:00","datePublished":"2014-03-18T00:00:00+00:00","description":"So, I was going through some tutorials in Android development and along the way created my first applications that just demonstrate the programming features that are available in Android.  It does not seem to me a far fetch programming paradigm as this is mostly familiar to someone with a windows or web development background, but with some subtle differences of course.  My purpose for this post and future posts as well is to list these nuances.","headline":"Android Development: main() Method, Application Lifecycle, and Event Handling","mainEntityOfPage":{"@type":"WebPage","@id":"https://rodansotto.github.io/tech-blog/2014/03/18/android-development-main-method-application-lifecycle-and-event-handling.html"},"url":"https://rodansotto.github.io/tech-blog/2014/03/18/android-development-main-method-application-lifecycle-and-event-handling.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/tech-blog/assets/css/main.css">
  <script src="/tech-blog/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="https://rodansotto.github.io/tech-blog/feed.xml" title="Rodan Sotto's Tech Blog">
<!--<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">-->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs tpbg ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('true' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }

  .tpbg {
    background: transparent;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/tech-blog/">
  <img class="site-favicon" title="Rodan Sotto's Tech Blog" src="" onerror="this.style.display='none'">
  Rodan Sotto's Tech Blog
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/tech-blog/">HOME</a><a class="page-link" href="/tech-blog/archives.html">ARCHIVES</a><a class="page-link" href="/tech-blog/categories.html">CATEGORIES</a><a class="page-link" href="/tech-blog/search2.html">SEARCH</a>




</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">Android Development: main() Method, Application Lifecycle, and Event Handling</h1>
  <h2 class="post-subtitle"></h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2014-03-18T00:00:00+00:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Mar 18, 2014
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 6 mins</span>
  </p></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <p><img src="https://rodansotto.files.wordpress.com/2017/11/androiddevimg02.jpg?w=300" alt="AndroidDevImg02">So, I was going through some tutorials in Android development and along the way created my first applications that just demonstrate the programming features that are available in Android.  It does not seem to me a far fetch programming paradigm as this is mostly familiar to someone with a windows or web development background, but with some subtle differences of course.  My purpose for this post and future posts as well is to list these nuances.</p>

<p>The first thing that a windows or web developer will ask, who is just beginning Android development, is how an Android application is started, thus the following question.</p>

<p><em><strong>Is there a main() method in Android?</strong></em>  There is no <strong>main()</strong> method but there is one similar to it, the <strong>main activity</strong>’s <strong>onCreate()</strong> method.</p>

<p><strong>Main activity</strong> is the first activity that is run by the Android OS when launching an android app.  The main activity is defined in the <strong>AndroidManifest.xml</strong> file.</p>

<p>&lt;?xml version=“1.0” encoding=“utf-8”?&gt;
&lt;manifest xmlns:android=“http://schemas.android.com/apk/res/android”
    package=“com.example.app” &gt;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;application
    android:allowBackup\="true"
    android:icon\="@drawable/ic_launcher"
    android:label\="@string/app_name"
    android:theme\="@style/AppTheme" \&gt;
    &lt;activity
        android:name\="com.example.app.MainActivity"
        android:label\="@string/app_name" \&gt;
        &lt;intent-filter\&gt;
            &lt;action android:name\="android.intent.action.MAIN" /&gt;

            &lt;category android:name\="android.intent.category.LAUNCHER" /&gt;
        &lt;/intent-filter\&gt;
    &lt;/activity\&gt;
&lt;/application\&gt;
</code></pre></div></div>

<p>&lt;/manifest&gt;</p>

<p>All android apps contain at least one activity.  An <strong>activity</strong> is much like a web page, in that it <strong>defines the screen layout and the behavior</strong>.  The activity’s <strong>screen layout</strong> is defined in an <strong>XML markup file</strong>.</p>

<p>&lt;RelativeLayout xmlns:android=“http://schemas.android.com/apk/res/android”
    xmlns:tools=“http://schemas.android.com/tools”
    android:layout_width=“match_parent”
    android:layout_height=“match_parent”
    android:paddingLeft=“@dimen/activity_horizontal_margin”
    android:paddingRight=“@dimen/activity_horizontal_margin”
    android:paddingTop=“@dimen/activity_vertical_margin”
    android:paddingBottom=“@dimen/activity_vertical_margin”
    tools:context=“com.example.app.MainActivity”&gt;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Button
    android:layout_width\="wrap_content"
    android:layout_height\="wrap_content"
    android:text\="Click me!!!"
    android:id\="@+id/button"
    android:layout_marginTop\="30dp"
    android:onClick\="buttonOnClick"
    android:layout_alignParentTop\="true"
    android:layout_centerHorizontal\="true" /&gt;

&lt;TextView
    android:layout_width\="wrap_content"
    android:layout_height\="wrap_content"
    android:textAppearance\="?android:attr/textAppearanceLarge"
    android:text\="No text..."
    android:id\="@+id/textView"
    android:layout_below\="@+id/button"
    android:layout_centerHorizontal\="true"
    android:layout_marginTop\="22dp" /&gt; &lt;/RelativeLayout\&gt;
</code></pre></div></div>

<p>The activity’s <strong>behavior</strong> is defined in a <strong>Java class</strong>.</p>

<p>public class MainActivity extends Activity {
    //
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
    //
    public void buttonOnClick(View v) {
        Button b = (Button) v;
        b.setText(“I’ve Been Clicked!”);
        //
        TextView t = (TextView) findViewById(R.id.textView);
        t.setText(“You Clicked Me!”);
    }
}</p>

<p>So for every screen that your android app will need, you usually create an activity.  The <strong>main activity</strong>’s <strong>onCreate()</strong> method is called by the Android OS when the app is launched.</p>

<p><strong><em>So what’s in the app’s lifecycle?</em></strong>  Well, an android app goes through <strong>different states</strong> in its lifecycle as a user navigates through, out of, and back to it, such as, when the user receives a phone call or switches to another app, when the user is not actively using it, when the user leaves your app and return to it a later time; and when the screen rotates between landscape and portrait orientation.</p>

<p>Knowing the different states in the lifecycle, how to take advantage of them by making sure your app does not crash, does not consume valuable system resource, and does not lose the user’s progress, will make you a good android app developer.</p>

<p>The figure below describes the states an android app goes through and the different lifecycle callbacks that the system calls and that the app can implement.</p>

<p><img src="/tech-blog/assets/images/basic-lifecycle.png" alt=""></p>

<p>So when the app is launched, it is created, started, and resumed, and stays in the resumed state until it is paused, and stays in the paused state until it is resumed, or stopped and stays in a stopped state until it is restarted or destroyed.</p>

<p>Key points to remember here are:</p>

<ul>
  <li>
<strong>Created</strong> and <strong>Started</strong> are <strong>transient states</strong>, meaning the app does not stay in these states for long.  So basically the app is created, then quickly started, and immediately goes into a resumed state and stays there for some time.</li>
  <li>
<strong>Resumed</strong>, <strong>Paused</strong>, and <strong>Stopped</strong> are static states, meaning these are the possible states that the app maybe currently in at any given time.  The difference between these 3 states are:
    <ul>
      <li>
<strong>Resumed</strong> or <strong>“running”</strong> state is when the activity is in the foreground and the user can interact with it.</li>
      <li>
<strong>Paused</strong> state is when the activity is partially obscured by another activity, usually a dialog window.  The other activity that is in the foreground is semi-transparent or does not cover the entire screen.  The paused activity does not receive input and cannot execute code.</li>
      <li>
<strong>Stopped</strong> state is when the activity is completely hidden and not visible to the user, thus it is in the background.  The activity instance and all its state information is retained, but it cannot execute any code.</li>
    </ul>
  </li>
  <li>
<strong>Destroyed</strong> state is when the activity is completely removed from the system memory.</li>
  <li>An activity is destroyed when the user presses the back button, or when it terminates itself, or when the system terminates it if it’s currently stopped and hasn’t been used in a long time or the other activity that is in the foreground requires more resources that the system must shut down background processes to recover memory.</li>
  <li>If the system terminates an activity due to system constraints, the system retains the state of the activity such that when the user navigates back to it, it creates a new activity instance and brings it back to the state it was in when it was destroyed using the saved data.</li>
</ul>

<p><a href="http://developer.android.com/training/basics/activity-lifecycle/index.html"><strong>Managing the Activity Lifecycle</strong></a> from the Android Developer website explains it in more detail including when to implement the different lifecycle callbacks.</p>

<p><strong><em>What’s different then in handling events in Android?</em></strong>  Similar to how you handle events on windows, you do the same in Android but with some caveat.  You should know that the easiest way to handle event is to create a function, an event handler function, and assign this function to the object’s event through the properties windows.  You can still do this in Android but only with the <strong>onClick</strong> event unfortunately.</p>

<p>public void onButtonClick(View v) {
    // process event
}</p>

<p>For other events, you need to code them by hand.  There are 3 ways to hookup to an object’s event using code:</p>

<ul>
  <li>Creating a subclass of the object’s event listener and creating an instance of it.</li>
</ul>

<p>@Override
protected void onCreate(Bundle savedInstanceState) {
    // …
    Button button = (Button) findViewById(R.id.button);
    MyOnClickListener Listener = new MyOnClickListener();
    button.setOnClickListener(Listener);
}
//
public class MyOnClickListener 
        implements View.OnClickListener { 
    public void onClick(View v) {
        // process event
    }
}</p>

<ul>
  <li>Implementing the object’s event listener interface in the activity class.</li>
</ul>

<p>public class MainActivity extends Activity
        implements TextView.OnEditorActionListener {
    //
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // …
        EditText et = (EditText) findViewById(R.id.editText);
        et.setOnEditorActionListener(this);
    }
    //
    @Override
    public boolean onEditorAction(TextView textView, int i, KeyEvent keyEvent) {
        TextView t = (TextView) findViewById(R.id.textView2);
        t.setText(textView.getText());
        return true;
    }
}</p>

<ul>
  <li>Using an anonymous class</li>
</ul>

<p>Button b = (Button) findViewById(R.id.button);
b.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View view) {
        TextView t = (TextView) findViewById(R.id.textView2);
        t.setText(“Regular button”);
    }
});</p>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/tech-blog/2014/03/03/winforms-using-devexpress-there-is-a-quick-way-of-making-sure-only-one-instance-of-a-form-is-open.html" title="WinForms: Using DevExpress, there is a quick way of making sure only one instance of a form is open">WinForms: Using DevExpress, there is a...</a><a class="next" href="/tech-blog/2014/04/03/responsive-html5-and-css3-web-design-responsive-enough-err-hello.html" title="Responsive HTML5 and CSS3 Web Design: Responsive Enough? Err… Hello?!?">Responsive HTML5 and CSS3 Web Design:...</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/tech-blog/2022/08/02/from-cloudformation-to-serverless-to-cdk.html" title="Responsive HTML5 and CSS3 Web Design: Responsive Enough? Err… Hello?!?">From CloudFormation To Serverless Framework To Cloud Development Kit?</a></li>
<li><a class="post-link" href="/tech-blog/2017/12/04/product-catalog-an-angular-and-material-demo.html" title="Responsive HTML5 and CSS3 Web Design: Responsive Enough? Err… Hello?!?">Product Catalog: An Angular and Material Demo</a></li>
<li><a class="post-link" href="/tech-blog/2007/05/05/vb-2005-things-to-know-about-the-visual-studio-2005-ide.html" title="Responsive HTML5 and CSS3 Web Design: Responsive Enough? Err… Hello?!?">VB 2005: Things to know about the Visual Studio 2005 IDE</a></li>
<li><a class="post-link" href="/tech-blog/2022/09/06/task-based-async-pattern.html" title="Responsive HTML5 and CSS3 Web Design: Responsive Enough? Err… Hello?!?">Multi-threading in C#: Task-Based Asynchronous Pattern (TAP)</a></li>
</ul>
    </div>
<div class="post-comments"></div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/tech-blog/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div></div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/tech-blog/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
